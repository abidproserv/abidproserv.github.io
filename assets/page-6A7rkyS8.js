import{r as j,i as N,a6 as b,a7 as w,d as S,j as e,L as c,C as y}from"./index-C_0FWtUm.js";import{L as v}from"./LogoBox2-hUMFjbL3.js";import{P as C}from"./PageTitle-BUKOvkpi.js";import{P as F}from"./PasswordFormInput-DBEVVad_.js";import{T as P}from"./TextFormInput-eAiN9HT1.js";import{o as I}from"./yup-JUAR945S.js";import{u as L}from"./index.esm-DGKCeF9p.js";import{c as k,a as l}from"./index.esm-Di7jOb3-.js";import{a as E}from"./httpClient-Ce5Kv-AL.js";import{F as B}from"./FormCheck-DdWi6gsw.js";import{B as R}from"./Button-DmnTiVRh.js";import{C as q,a as T}from"./Card-BRu89jqC.js";import"./logo-color-light-BmagYZFD.js";import"./Feedback-B6Plq8hc.js";import"./FormGroup-H1BSCCGq.js";import"./FormContext-DA-Yso4Y.js";import"./FormLabel-BAMqk-uZ.js";import"./FormControl-BErKTD8b.js";import"./ElementChildren-BCVsKVMJ.js";import"./Button-DZkCRLmd.js";import"./divWithClassName-Bq-9A6fd.js";const U=()=>{const[r,o]=j.useState(!1),s=N(),{saveSession:d}=b(),[p]=w(),{showNotification:i}=S(),u=k({email:l().email("Please enter a valid email").required("Please enter your email"),password:l().required("Please enter your password")}),{control:x,handleSubmit:h}=L({resolver:I(u),defaultValues:{email:"",password:""}}),g=()=>{const t=p.get("redirectTo");s(t||"/")},f=h(async t=>{var n,m;try{const a=await E("/auth/login",t);a.data.token&&(d({...a.data.user??{},token:a.data.token}),localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),g(),i({message:"Successfully logged in. Redirecting....",variant:"success"}))}catch(a){(n=a.response)!=null&&n.data&&i({message:(m=a.response)==null?void 0:m.data,variant:"danger"})}finally{o(!1)}});return{loading:r,login:f,control:x}},$=()=>{const{loading:r,login:o,control:s}=U();return e.jsxs("form",{className:"authentication-form",onSubmit:o,children:[e.jsx(P,{control:s,name:"email",containerClassName:"mb-3",label:"Email",id:"email-id",placeholder:"Enter your email"}),e.jsx(F,{control:s,name:"password",containerClassName:"mb-3",placeholder:"Enter your password",id:"password-id",label:e.jsxs(e.Fragment,{children:[e.jsx(c,{to:"/auth/reset-pass",className:"float-end text-muted text-unline-dashed ms-1",children:"Reset password"}),e.jsx("label",{className:"form-label",htmlFor:"example-password",children:"Password"})]})}),e.jsx("div",{className:"mb-3",children:e.jsx(B,{label:"Remember me",id:"sign-in"})}),e.jsx("div",{className:"mb-1 text-center d-grid",children:e.jsx(R,{variant:"primary",type:"submit",disabled:r,children:"Sign In"})})]})},oe=()=>e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Sign In"}),e.jsxs(y,{xl:5,className:"mx-auto",children:[e.jsx(q,{className:"auth-card",children:e.jsxs(T,{className:"px-3 py-5",children:[e.jsx(v,{textLogo:{height:24,width:110},squareLogo:{className:"me-2",width:33,height:28},containerClassName:"mx-auto mb-4 text-center auth-logo"}),e.jsx("h2",{className:"fw-bold text-center fs-18",children:"Sign In"}),e.jsx("p",{className:"text-muted text-center mt-1 mb-4",children:"Enter your email address and password."}),e.jsx("div",{className:"px-4",children:e.jsx($,{})})]})}),e.jsxs("p",{className:"mb-0 text-center",children:["New here?",e.jsx(c,{to:"/auth/sign-up-2",className:"fw-bold ms-1",children:"Sign Up"})]})]})]});export{oe as default};
