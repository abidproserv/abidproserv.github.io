import{d as C,r as d,j as e,e as S,R as b,C as j,I as t,L as p}from"./index-C_0FWtUm.js";import{P as L}from"./PageTitle-BUKOvkpi.js";import{g as I,a as A}from"./httpClient-Ce5Kv-AL.js";import{M,a as D,b as E,d as F}from"./Modal-BCfQSCEq.js";import{F as a}from"./Form-BBwBwUfV.js";import{B as m}from"./Button-DmnTiVRh.js";import{S as G}from"./Spinner-CV1K1H57.js";import{C as P,a as q}from"./Card-BRu89jqC.js";import"./useWindow-BntBCDwD.js";import"./AbstractModalHeader-Dsm-yrMY.js";import"./usePrevious-ZFXiGGUU.js";import"./hasClass-C12hcuqx.js";import"./NoopTransition-bwbrAZGq.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-Bq-9A6fd.js";import"./FormCheck-DdWi6gsw.js";import"./Feedback-B6Plq8hc.js";import"./FormContext-DA-Yso4Y.js";import"./ElementChildren-BCVsKVMJ.js";import"./FormControl-BErKTD8b.js";import"./FormGroup-H1BSCCGq.js";import"./FormLabel-BAMqk-uZ.js";import"./FormSelect--K4xdpmf.js";import"./FormText-BNzwvInA.js";import"./Button-DZkCRLmd.js";const le=()=>{const{showNotification:u}=C(),[r,v]=d.useState([]),[w,o]=d.useState(!1),[N,h]=d.useState(!1),[n,f]=d.useState({email:"",firstName:"",lastName:"",password:"",gender:""}),g=async()=>{const s=await I("/api/user/role/Checker");v(s),f({email:"",firstName:"",lastName:"",password:"",gender:""})},c=s=>{const{name:l,value:x}=s.target;f(i=>({...i,[l]:x}))};d.useEffect(()=>{g()},[]);const y=async s=>{var l,x;h(!0),s.preventDefault();try{const i={...n};i.licenseNo="dev",i.role="Checker",await A("/api/auth/register",i),o(!1),g(),u({message:"Checker added successfully",variant:"success"})}catch(i){h(!1),(l=i.response)!=null&&l.data&&u({message:(x=i.response)==null?void 0:x.data,variant:"danger"}),console.error("Error submitting form:",i)}h(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Checkers"}),e.jsx(M,{show:w,onHide:()=>o(!1),backdrop:"static",keyboard:!1,className:"fade",id:"exampleModal",tabIndex:-1,children:e.jsxs(a,{onSubmit:y,children:[e.jsxs(D,{children:[e.jsx("h5",{className:"modal-title",id:"exampleModalLabel",children:"Add new checker"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>o(!1)})]}),e.jsx(E,{children:e.jsx(S,{children:e.jsx(b,{className:"justify-content-md-center",children:e.jsxs(j,{md:12,children:[e.jsxs(a.Group,{controlId:"formEmail",className:"mb-6",children:[e.jsx(a.Label,{children:"Email address"}),e.jsx(a.Control,{type:"email",name:"email",value:n.email,onChange:c,required:!0})]}),e.jsxs(a.Group,{controlId:"formName",className:"mb-6",children:[e.jsx(a.Label,{children:"First Name"}),e.jsx(a.Control,{type:"text",name:"firstName",value:n.firstName,onChange:c,required:!0})]}),e.jsxs(a.Group,{controlId:"formLastName",className:"mb-6",children:[e.jsx(a.Label,{children:"Last Name"}),e.jsx(a.Control,{type:"text",name:"lastName",value:n.lastName,onChange:c,required:!0})]}),e.jsxs(a.Group,{controlId:"formPassword",className:"mb-6",children:[e.jsx(a.Label,{children:"Password"}),e.jsx(a.Control,{type:"password",name:"password",value:n.password,onChange:c,required:!0})]}),e.jsxs(a.Group,{controlId:"formGender",className:"mb-6",children:[e.jsx(a.Label,{children:"Gender"}),e.jsxs(a.Select,{name:"gender",value:n.gender,onChange:c,required:!0,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})})})}),e.jsxs(F,{children:[e.jsx(m,{type:"button",variant:"secondary",onClick:s=>{s.preventDefault(),o(!1)},children:"Close"}),e.jsxs(m,{type:"submit",variant:"primary",children:[N&&e.jsx(G,{color:"white",className:"spinner-border-sm me-1"}),N?"Please wait ...":"Submit"]})]})]})}),e.jsx(b,{children:e.jsx(j,{children:e.jsxs(P,{children:[e.jsx(q,{children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-between gap-3",children:[e.jsxs("div",{className:"search-bar",children:[e.jsx("span",{children:e.jsx(t,{icon:"bx:search-alt"})}),e.jsx("input",{type:"search",className:"form-control",id:"search",placeholder:"Search ..."})]}),e.jsx("div",{children:e.jsxs(m,{variant:"primary",className:"d-inline-flex align-items-center",onClick:()=>o(!0),children:[e.jsx(t,{icon:"bx:plus",className:"me-1"}),"Add New Checker"]})})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive table-centered",children:e.jsxs("table",{className:"table text-nowrap mb-0",children:[e.jsx("thead",{className:"bg-light bg-opacity-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-0 py-2",children:"Name"}),e.jsx("th",{className:"border-0 py-2",children:"Email"}),e.jsx("th",{className:"border-0 py-2",children:"Status"}),e.jsx("th",{className:"border-0 py-2",children:"Created At"}),e.jsx("th",{className:"border-0 py-2",children:"Action"})]})}),e.jsxs("tbody",{children:[console.log("allTasks",r),r==null?void 0:r.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[s.gender&&e.jsx("div",{className:"me-2",children:s.gender.toLowerCase()==="male"?e.jsx(t,{icon:"mdi:face-man",className:"avatar-xs"}):s.gender.toLowerCase()==="female"?e.jsx(t,{icon:"mdi:face-woman",className:"avatar-xs"}):e.jsx(t,{icon:"mdi:face",className:"avatar-xs"})}),e.jsx("div",{children:e.jsxs("h5",{className:"fs-14 mt-1 fw-normal",children:[s.firstName," ",s.lastName]})})]})}),e.jsx("td",{children:s.email}),e.jsxs("td",{className:`text-${s.status==="deleted"?"danger":s.status==="inactive"?"warning":"success"}`,children:[e.jsx(t,{icon:"bxs:circle",className:"me-1"}),(s==null?void 0:s.status)==="inactive"?"Inactive":"Active"]}),e.jsxs("td",{children:[new Date(s.createdAt).toDateString()," "]}),e.jsxs("td",{children:[e.jsx(m,{variant:"soft-secondary",size:"sm",className:"me-2",children:e.jsx(t,{icon:"bx:edit",className:"fs-16"})}),e.jsx(m,{variant:"soft-danger",size:"sm",type:"button",children:e.jsx(t,{icon:"bx:trash",className:"fs-16"})})]})]},l))]})]})}),(r==null?void 0:r.length)>0&&e.jsxs("div",{className:"align-items-center justify-content-between row g-0 text-center text-sm-start p-3 border-top",children:[e.jsx("div",{className:"col-sm",children:e.jsxs("div",{className:"text-muted",children:["Showing ",e.jsx("span",{className:"fw-semibold",children:r==null?void 0:r.length})," of ",e.jsx("span",{className:"fw-semibold",children:r==null?void 0:r.length})," users"]})}),e.jsx(j,{sm:"auto",className:"mt-3 mt-sm-0",children:e.jsxs("ul",{className:"pagination pagination-rounded m-0",children:[e.jsx("li",{className:"page-item",children:e.jsx(p,{to:"",className:"page-link",children:e.jsx(t,{icon:"bx:left-arrow-alt"})})}),e.jsx("li",{className:"page-item active",children:e.jsx(p,{to:"",className:"page-link",children:"1"})}),e.jsx("li",{className:"page-item",children:e.jsx(p,{to:"",className:"page-link",children:e.jsx(t,{icon:"bx:right-arrow-alt"})})})]})})]})]})]})})})]})};export{le as default};
